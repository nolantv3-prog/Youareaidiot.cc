<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Normal Site</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #dcdcdc;
      font-family: Arial, sans-serif;
      user-select: none;
    }
    .popup {
      position: absolute;
      background: #fff;
      border: 2px solid #000;
      box-shadow: 8px 8px 15px rgba(0,0,0,.35);
      will-change: transform, left, top;
    }
    .bar {
      background: #333;
      color: #fff;
      font-size: 12px;
      padding: 4px 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .x {
      cursor: pointer;
      font-weight: bold;
      padding: 0 6px;
    }
    img {
      width: 100%;
      height: auto;
      display: block;
      pointer-events: none;
    }
    .hud {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(255,255,255,.9);
      border: 2px solid #000;
      padding: 8px 10px;
      font-size: 13px;
      z-index: 999999;
    }
    button { cursor: pointer; }
  </style>
</head>
<body>
  <div class="hud">
    <div><b>Popups:</b> <span id="count">0</span></div>
    <button id="stop">Stop</button>
  </div>

<script>
  // ✅ Put your embedded image DATA URL here (see instructions below)
  const IMG_DATA_URL = "REPLACE_WITH_DATA_URL";

  const popups = [];
  const maxPopups = 180;      // safety cap
  const spawnEveryMs = 80;    // CHAOS: lower = faster
  const shakeEveryMs = 50;

  const countEl = document.getElementById("count");
  const stopBtn = document.getElementById("stop");

  let spawning = true;

  function rand(min, max) { return Math.random() * (max - min) + min; }

  function createPopup() {
    if (!spawning) return;
    if (popups.length >= maxPopups) return;

    const p = document.createElement("div");
    p.className = "popup";

    const size = rand(140, 260);
    p.style.width = size + "px";

    const x = rand(0, Math.max(0, window.innerWidth - size));
    const y = rand(0, Math.max(0, window.innerHeight - size));

    // store position + velocity directly (faster than getBoundingClientRect)
    p._x = x; p._y = y;
    p._vx = rand(-9, 9);
    p._vy = rand(-9, 9);

    p.innerHTML = `
      <div class="bar">
        <span>NEW TAB</span>
        <span class="x">×</span>
      </div>
      <img alt="" src="${IMG_DATA_URL}">
    `;

    // click X to close that popup
    p.querySelector(".x").onclick = () => {
      p.remove();
      const i = popups.indexOf(p);
      if (i >= 0) popups.splice(i, 1);
      countEl.textContent = popups.length;
    };

    document.body.appendChild(p);
    popups.push(p);
    countEl.textContent = popups.length;

    // extra chaos: random rotation
    p._rot = rand(-15, 15);
  }

  function animate() {
    for (const p of popups) {
      const w = p.offsetWidth;
      const h = p.offsetHeight;

      p._x += p._vx;
      p._y += p._vy;

      // bounce
      if (p._x <= 0 || p._x >= window.innerWidth - w) p._vx *= -1;
      if (p._y <= 0 || p._y >= window.innerHeight - h) p._vy *= -1;

      // jitter rotation
      p._rot += rand(-2.5, 2.5);

      p.style.left = p._x + "px";
      p.style.top  = p._y + "px";
      p.style.transform = `rotate(${p._rot}deg)`;
    }
    requestAnimationFrame(animate);
  }

  // spawn loop
  const spawner = setInterval(createPopup, spawnEveryMs);

  // shake
  const shaker = setInterval(() => {
    if (!spawning) return;
    document.body.style.transform =
      `translate(${rand(-4,4)}px, ${rand(-4,4)}px)`;
  }, shakeEveryMs);

  // stop button
  stopBtn.onclick = () => {
    spawning = false;
    clearInterval(spawner);
    clearInterval(shaker);
    document.body.style.transform = "none";
  };

  // auto-stop after 12s (keeps it from melting devices)
  setTimeout(() => stopBtn.click(), 12000);

  animate();
</script>
</body>
</html>


